import{j as t,r as h,x as K,n as Q,y as X,z as Y,A as ee,B as oe}from"./index-C3ctIiJl.js";import{c as w,g as H,a as V,_ as k,b as l,u as re,d as L,s as M,e as q,f as U,i as te,r as se,h as z,j as T,l as _,k as ae}from"./createSvgIcon-CNOz48qt.js";import{T as ne}from"./ThemeProvider-B71SV120.js";import{B as O}from"./Box-FC9Y7n6T.js";import{C as le}from"./Container-CwrVfLUr.js";import{r as ie,m as ce,a as de,G as pe,I as ue,P as fe,T as ge}from"./IconButton-Cmlk01-7.js";import{T as F}from"./TextField-hedXIXYF.js";import{B as me}from"./Button-U5nG2xrk.js";import{C as ve}from"./CircularProgress-Bxkk8ski.js";import{G as $}from"./Grid-Dp_0KShC.js";import"./styled-CuzW6_nN.js";const xe=w(t.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function be(e){return H("MuiAvatar",e)}V("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const ye=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],he=["component","slots","slotProps"],Se=["component"];function N(e,r){const{className:s,elementType:o,ownerState:a,externalForwardedProps:n,getSlotOwnerState:d,internalForwardedProps:i}=r,g=k(r,ye),{component:S,slots:x={[e]:void 0},slotProps:j={[e]:void 0}}=n,b=k(n,he),m=x[e]||o,C=ie(j[e],a),p=ce(l({className:s},g,{externalForwardedProps:e==="root"?b:void 0,externalSlotProps:C})),{props:{component:u},internalRef:f}=p,v=k(p.props,Se),P=re(f,C==null?void 0:C.ref,r.ref),c=d?d(v):{},y=l({},a,c),A=e==="root"?u||S:u,I=de(m,l({},e==="root"&&!S&&!x[e]&&i,e!=="root"&&!x[e]&&i,v,A&&{as:A},{ref:P}),y);return Object.keys(c).forEach(R=>{delete I[R]}),[m,I]}const Ce=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],je=e=>{const{classes:r,variant:s,colorDefault:o}=e;return U({root:["root",s,o&&"colorDefault"],img:["img"],fallback:["fallback"]},be,r)},Ae=M("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:s}=e;return[r.root,r[s.variant],s.colorDefault&&r.colorDefault]}})(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:l({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:l({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]})),Me=M("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,r)=>r.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Pe=M(xe,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,r)=>r.fallback})({width:"75%",height:"75%"});function Ie({crossOrigin:e,referrerPolicy:r,src:s,srcSet:o}){const[a,n]=h.useState(!1);return h.useEffect(()=>{if(!s&&!o)return;n(!1);let d=!0;const i=new Image;return i.onload=()=>{d&&n("loaded")},i.onerror=()=>{d&&n("error")},i.crossOrigin=e,i.referrerPolicy=r,i.src=s,o&&(i.srcset=o),()=>{d=!1}},[e,r,s,o]),a}const we=h.forwardRef(function(r,s){const o=L({props:r,name:"MuiAvatar"}),{alt:a,children:n,className:d,component:i="div",slots:g={},slotProps:S={},imgProps:x,sizes:j,src:b,srcSet:m,variant:C="circular"}=o,p=k(o,Ce);let u=null;const f=Ie(l({},x,{src:b,srcSet:m})),v=b||m,P=v&&f!=="error",c=l({},o,{colorDefault:!P,component:i,variant:C}),y=je(c),[A,I]=N("img",{className:y.img,elementType:Me,externalForwardedProps:{slots:g,slotProps:{img:l({},x,S.img)}},additionalProps:{alt:a,src:b,srcSet:m,sizes:j},ownerState:c});return P?u=t.jsx(A,l({},I)):n||n===0?u=n:v&&a?u=a[0]:u=t.jsx(Pe,{ownerState:c,className:y.fallback}),t.jsx(Ae,l({as:i,ownerState:c,className:q(y.root,d),ref:s},p,{children:u}))}),ke=(e,r)=>l({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},r&&!e.vars&&{colorScheme:e.palette.mode}),Re=e=>l({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),Oe=(e,r=!1)=>{var s;const o={};r&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([d,i])=>{var g;o[e.getColorSchemeSelector(d).replace(/\s*&/,"")]={colorScheme:(g=i.palette)==null?void 0:g.mode}});let a=l({html:ke(e,r),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:l({margin:0},Re(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},o);const n=(s=e.components)==null||(s=s.MuiCssBaseline)==null?void 0:s.styleOverrides;return n&&(a=[a,n]),a};function ze(e){const r=L({props:e,name:"MuiCssBaseline"}),{children:s,enableColorScheme:o=!1}=r;return t.jsxs(h.Fragment,{children:[t.jsx(pe,{styles:a=>Oe(a,o)}),s]})}var E={},Ne=te;Object.defineProperty(E,"__esModule",{value:!0});var G=E.default=void 0,Le=Ne(se()),Ee=t;G=E.default=(0,Le.default)((0,Ee.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2M9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9zm9 14H6V10h12zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"}),"LockOutlined");function Te(e){return H("MuiAlert",e)}const B=V("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),_e=w(t.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),Fe=w(t.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),$e=w(t.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),Be=w(t.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),We=w(t.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),De=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],He=e=>{const{variant:r,color:s,severity:o,classes:a}=e,n={root:["root",`color${z(s||o)}`,`${r}${z(s||o)}`,`${r}`],icon:["icon"],message:["message"],action:["action"]};return U(n,Te,a)},Ve=M(fe,{name:"MuiAlert",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:s}=e;return[r.root,r[s.variant],r[`${s.variant}${z(s.color||s.severity)}`]]}})(({theme:e})=>{const r=e.palette.mode==="light"?T:_,s=e.palette.mode==="light"?_:T;return l({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(([,o])=>o.main&&o.light).map(([o])=>({props:{colorSeverity:o,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${o}Color`]:r(e.palette[o].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${o}StandardBg`]:s(e.palette[o].light,.9),[`& .${B.icon}`]:e.vars?{color:e.vars.palette.Alert[`${o}IconColor`]}:{color:e.palette[o].main}}})),...Object.entries(e.palette).filter(([,o])=>o.main&&o.light).map(([o])=>({props:{colorSeverity:o,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${o}Color`]:r(e.palette[o].light,.6),border:`1px solid ${(e.vars||e).palette[o].light}`,[`& .${B.icon}`]:e.vars?{color:e.vars.palette.Alert[`${o}IconColor`]}:{color:e.palette[o].main}}})),...Object.entries(e.palette).filter(([,o])=>o.main&&o.dark).map(([o])=>({props:{colorSeverity:o,variant:"filled"},style:l({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${o}FilledColor`],backgroundColor:e.vars.palette.Alert[`${o}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[o].dark:e.palette[o].main,color:e.palette.getContrastText(e.palette[o].main)})}))]})}),qe=M("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,r)=>r.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Ue=M("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,r)=>r.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),W=M("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,r)=>r.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),D={success:t.jsx(_e,{fontSize:"inherit"}),warning:t.jsx(Fe,{fontSize:"inherit"}),error:t.jsx($e,{fontSize:"inherit"}),info:t.jsx(Be,{fontSize:"inherit"})},Ge=h.forwardRef(function(r,s){const o=L({props:r,name:"MuiAlert"}),{action:a,children:n,className:d,closeText:i="Close",color:g,components:S={},componentsProps:x={},icon:j,iconMapping:b=D,onClose:m,role:C="alert",severity:p="success",slotProps:u={},slots:f={},variant:v="standard"}=o,P=k(o,De),c=l({},o,{color:g,severity:p,variant:v,colorSeverity:g||p}),y=He(c),A={slots:l({closeButton:S.CloseButton,closeIcon:S.CloseIcon},f),slotProps:l({},x,u)},[I,R]=N("closeButton",{elementType:ue,externalForwardedProps:A,ownerState:c}),[Z,J]=N("closeIcon",{elementType:We,externalForwardedProps:A,ownerState:c});return t.jsxs(Ve,l({role:C,elevation:0,ownerState:c,className:q(y.root,d),ref:s},P,{children:[j!==!1?t.jsx(qe,{ownerState:c,className:y.icon,children:j||b[p]||D[p]}):null,t.jsx(Ue,{ownerState:c,className:y.message,children:n}),a!=null?t.jsx(W,{ownerState:c,className:y.action,children:a}):null,a==null&&m?t.jsx(W,{ownerState:c,className:y.action,children:t.jsx(I,l({size:"small","aria-label":i,title:i,color:"inherit",onClick:m},R,{children:t.jsx(Z,l({fontSize:"small"},J))}))}):null]}))}),Ze="/safety_project/assets/industry4-DCW0z_sx.jpg",Je=ae({palette:{primary:{main:"#1976d2",contrastText:"#ffffff"},secondary:{main:"#ffffff",contrastText:"#1976d2"}}}),Ke="Admin",Qe="Operator",Xe="Viewer",po=()=>{const[e,r]=h.useState(""),[s,o]=h.useState(""),[a,n]=h.useState(""),[d,i]=h.useState(""),[g,S]=h.useState(!1),[x,j]=h.useState(""),b=K(),m=Q(),C=async p=>{p.preventDefault();let u=!0;if(e?isNaN(e)?(n("Mobile number should contain only digit"),u=!1):e.toString().length!==10?(n("Mobile number length should be 10 digits"),u=!1):n(""):(n("Mobile number is required"),u=!1),!!u){S(!0);try{await X(e,s),console.log("Login successful");const f=await Y(),v=f.info.role;m(ee(f.info)),m(oe(v)),v===Ke?b("/dashboard"):v===Qe?b("/appsidebar1"):v===Xe&&b("/appsidebar2")}catch(f){f.isAxiosError&&f.response?(console.error("Error logging in:",f.response.data.detail),alert("Login failed. Please check your credentials and try again.")):(console.error("Network error:",f),j("Network error occurred. Please try again later."))}finally{S(!1)}}};return t.jsx(ne,{theme:Je,children:t.jsx(O,{sx:{backgroundImage:`url(${Ze})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",objectFit:"fill"},children:t.jsxs(le,{component:"main",maxWidth:"xs",sx:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"20px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",padding:"20px"},children:[t.jsx(ze,{}),t.jsxs(O,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsx(we,{sx:{m:1,bgcolor:"primary.main"},children:t.jsx(G,{})}),t.jsx(ge,{component:"h1",variant:"h5",color:"primary",children:"Sign in"}),t.jsxs(O,{component:"form",onSubmit:C,noValidate:!0,sx:{mt:1},children:[x&&t.jsx(Ge,{severity:"error",sx:{width:"100%"},children:x}),t.jsx(F,{margin:"normal",required:!0,fullWidth:!0,id:"mobileNumber",label:"Mobile Number",name:"mobileNumber",autoComplete:"mobileNumber",autoFocus:!0,value:e,onChange:p=>r(p.target.value),error:!!a,helperText:a,sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"primary.main"}},"& .MuiInputLabel-root":{color:"rgba(0, 0, 0, 0.6)","&.Mui-focused":{color:"primary.main"}}}}),t.jsx(F,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:s,onChange:p=>o(p.target.value),error:!!d,helperText:d,sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"primary.main"}},"& .MuiInputLabel-root":{color:"rgba(0, 0, 0, 0.6)","&.Mui-focused":{color:"primary.main"}}}}),t.jsx(me,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{mt:3,mb:2},disabled:g,children:g?t.jsx(ve,{size:24,color:"secondary"}):"Sign In"}),t.jsx($,{container:!0,children:t.jsx($,{item:!0,xs:!0})})]})]})]})})})};export{po as default};
