import{x as N,r as n,h as w,j as t,D as y}from"./index-Dpbc67ik.js";import{C as S,a as k}from"./CRow-DgD9vsWu.js";import{C as F,a as I}from"./CCardBody-BsE5d9zC.js";import{a as h,C as u,b as g}from"./CFormInput-DLbBIbQ-.js";import{a as B}from"./index.esm-Dy6smDAP.js";const Y=()=>{const f=N(),[i,p]=n.useState(""),[m,l]=n.useState(""),[c,d]=n.useState([]),[r,a]=n.useState({}),x=w(e=>e.userInfo.whitelevel_id),C=async e=>{try{const o=await y.post("/employee/name/",{employee_id:e,whitelevel_id:x});return o.data.employee_name?(a(s=>({...s,employee_id:""})),o.data.employee_name):(a(s=>({...s,employee_id:"Employee does not exist"})),"")}catch(o){return console.error("Error fetching employee name:",o),a(s=>({...s,employee_id:"Error fetching employee name"})),""}},_=async e=>{try{return(await y.get(`/employee/search/?nameQuery=${e}`)).data||[]}catch(o){return console.error("Error fetching employee suggestions:",o),[]}},j=async e=>{const o=e.target.value;if(p(o),o.trim()!==""){const s=await C(o);l(s)}else l("")},v=async e=>{const o=e.target.value;if(l(o),/^[a-zA-Z\s.]*$/.test(o))if(a(s=>({...s,employee_name:""})),o.trim()!==""){const s=await _(o);console.log("Fetched suggestions:",s),d(s)}else d([]);else a(s=>({...s,employee_name:"Only letters and spaces and dots are allowed"}))},E=e=>{l(e.employee_name),p(e.employee_id),d([])},b=()=>{let e={};i||(e.employee_id="Employee code is required"),m||(e.employee_name="Employee name is required"),m===""&&(e.employee_id="Employee does not exist"),a(e),Object.keys(e).length===0&&f("/aftersearch?employeeid="+i)};return t.jsx(S,{className:"justify-content-center",style:{display:"flex",justifyContent:"center",height:"70%"},children:t.jsx(k,{xs:9,children:t.jsx(F,{className:"mb-4",children:t.jsxs(I,{children:[t.jsxs(h,{className:"mb-3",children:[t.jsx(u,{type:"text",id:"floatingInput",value:i,onChange:j,style:{borderColor:r.employee_id?"red":void 0}}),t.jsx(g,{htmlFor:"floatingInput",children:"Enter Employee Code"}),r.employee_id&&t.jsx("div",{className:"text-danger",children:r.employee_id})]}),t.jsxs(h,{className:"mb-3",style:{position:"relative"},children:[t.jsx(u,{type:"text",id:"floatingName",value:m,onChange:v,style:{borderColor:r.employee_name?"red":void 0}}),t.jsx(g,{htmlFor:"floatingName",children:"Enter Your Name"}),r.employee_name&&t.jsx("div",{className:"text-danger",children:r.employee_name}),c.length>0&&t.jsx("div",{style:{display:"block",position:"absolute",zIndex:1e3,width:"100%",border:"1px solid #ccc",backgroundColor:"#fff",borderRadius:"0.25rem",boxShadow:"0 0.5rem 1rem rgba(0, 0, 0, 0.15)",maxHeight:"200px",overflowY:"auto",color:"blue"},children:c.map((e,o)=>t.jsx("div",{onClick:()=>E(e),style:{padding:"8px",cursor:"pointer",borderBottom:o!==c.length-1?"1px solid #ccc":"none",backgroundColor:"#f8f9fa",hover:{backgroundColor:"#e9ecef"}},children:e.employee_name},o))})]}),t.jsx("div",{style:{textAlign:"center"},children:t.jsx(B,{onClick:b,style:{backgroundColor:"#1976d2",color:"#fff"},children:"Search"})})]})})})})};export{Y as default};
