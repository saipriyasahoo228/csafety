import{r as d,R as Y,j as e,D as Q,P as f}from"./index-Dpbc67ik.js";import{B as _}from"./Box-DQsBwXvn.js";import{P as W,T as G,I as xe}from"./IconButton-henUlnG1.js";import{T as A,a as H,e as L,c as x,d as u,b as M}from"./TableRow-BFdZ0Yr8.js";import{T as K,a as Z,c as V,v as X,b as je}from"./TableSortLabel-B0YV5vn0.js";import{D as ee,a as se,b as te,c as ne}from"./DialogTitle-Dw-DssdK.js";import{B as re}from"./Button-BH6ERtgr.js";import{d as fe,E as ye}from"./jspdf.plugin.autotable-OSafuGQo.js";import{T as be}from"./TextField-B4yARQua.js";import{f as Se}from"./format-sbWH3_uq.js";import"./createSvgIcon-BHe6x9CX.js";import"./DefaultLayout-Db7DVaro.js";import"./index.esm-Dy6smDAP.js";import"./cil-user-Ddrdy7PS.js";import"./dividerClasses-BKrNzom6.js";function oe(n,o,s){return o[s]<n[s]?-1:o[s]>n[s]?1:0}function Pe(n,o){return n==="desc"?(s,r)=>oe(s,r,o):(s,r)=>-oe(s,r,o)}function Re(n,o){const s=n.map((r,c)=>[r,c]);return s.sort((r,c)=>{const t=o(r[0],c[0]);return t!==0?t:r[1]-c[1]}),s.map(r=>r[0])}const Te=[{id:"item_name",numeric:!1,disablePadding:!0,label:"Item Name"},{id:"count",numeric:!0,disablePadding:!1,label:"Count"}];function de(n){const{order:o,orderBy:s,onRequestSort:r}=n,c=t=>l=>{r(l,t)};return e.jsx(M,{children:e.jsx(x,{children:Te.map(t=>e.jsx(u,{align:t.numeric?"right":"left",padding:t.disablePadding?"4":"normal",sortDirection:s===t.id?o:!1,children:e.jsxs(V,{active:s===t.id,direction:s===t.id?o:"asc",onClick:c(t.id),children:[t.label,s===t.id?e.jsx(_,{component:"span",sx:X,children:o==="desc"?"sorted descending":"sorted ascending"}):null]})},t.id))})})}de.propTypes={onRequestSort:f.func.isRequired,order:f.oneOf(["asc","desc"]).isRequired,orderBy:f.string.isRequired};function le(n){const{numSelected:o}=n;return e.jsx(Z,{children:e.jsx(G,{sx:{flex:"1 1 100%",textAlign:"center"},variant:"h6",id:"tableTitle",component:"div",children:"TOOL LIST"})})}le.propTypes={numSelected:f.number.isRequired};function Ce(){const[n,o]=d.useState("asc"),[s,r]=d.useState("item_name"),[c,t]=d.useState([]),[l,P]=d.useState(0),[h,$]=d.useState(5),[R,T]=d.useState(!1),[C,w]=d.useState([]),[j,k]=d.useState([]),[N,O]=d.useState({});d.useEffect(()=>{(async()=>{try{const p=(await Q.get("/item/upcomingIssue/15/?filter=Tool")).data.data.Tool;console.log("resul:",p);const z=Object.entries(p).map(([y,b],S)=>({id:S,item_name:y,count:b.count})),B=Object.entries(p).reduce((y,[b,S])=>{const U=S.issued_to.map(({employee_id:J,employee_name:F})=>({empCode:J,empName:F}));return{...y,[b]:U}},{});console.log("result:",z),k(z),O(B)}catch(i){if(i.isAxiosError&&i.response){console.error(`HTTP error! status: ${i}`);const p=JSON.stringify(i.response.data);console.error("Response body:",p),alert(`Error: ${p}`)}console.error("Error fetching data:",i)}})()},[]);const q=(a,i)=>{o(s===i&&n==="asc"?"desc":"asc"),r(i)},I=(a,i)=>{const p=N[a];w(p),T(!0)},m=()=>{T(!1),w([])},g=(a,i)=>{P(i)},E=a=>{$(parseInt(a.target.value,10)),P(0)},D=l>0?Math.max(0,(1+l)*h-j.length):0,v=Y.useMemo(()=>Re(j,Pe(n,s)).slice(l*h,l*h+h),[n,s,l,j,h]);return e.jsxs(_,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:[e.jsxs(W,{sx:{width:"100%",mb:2},children:[e.jsx(le,{numSelected:c.length}),e.jsx(A,{children:e.jsxs(H,{"aria-labelledby":"tableTitle",size:"medium",children:[e.jsx(de,{order:n,orderBy:s,onRequestSort:q}),e.jsxs(L,{children:[v.map((a,i)=>e.jsxs(x,{children:[e.jsx(u,{component:"th",scope:"row",padding:"4",children:a.item_name}),e.jsx(u,{align:"right",onClick:()=>I(a.item_name,a.count),style:{cursor:"pointer"},children:a.count})]})),D>0&&e.jsx(x,{style:{height:53*D},children:e.jsx(u,{colSpan:2})})]})]})}),e.jsx(K,{rowsPerPageOptions:[5,10,25],component:"div",count:j.length,rowsPerPage:h,page:l,onPageChange:g,onRowsPerPageChange:E})]}),e.jsxs(ee,{open:R,onClose:m,children:[e.jsx(se,{children:"Employee Details"}),e.jsx(te,{children:e.jsx(A,{children:e.jsxs(H,{children:[e.jsx(M,{children:e.jsxs(x,{children:[e.jsx(u,{children:"Employee Code"}),e.jsx(u,{children:"Employee Name"})]})}),e.jsx(L,{children:C&&C.map(a=>e.jsxs(x,{children:[e.jsx(u,{children:a.empCode}),e.jsx(u,{children:a.empName})]},a.empCode))})]})})}),e.jsx(ne,{children:e.jsx(re,{onClick:m,color:"primary",children:"Close"})})]})]})}function ae(n,o,s){return o[s]<n[s]?-1:o[s]>n[s]?1:0}function we(n,o){return n==="desc"?(s,r)=>ae(s,r,o):(s,r)=>-ae(s,r,o)}function Ee(n,o){const s=n.map((r,c)=>[r,c]);return s.sort((r,c)=>{const t=o(r[0],c[0]);return t!==0?t:r[1]-c[1]}),s.map(r=>r[0])}const De=[{id:"item_name",numeric:!1,disablePadding:!0,label:"Item Name"},{id:"count",numeric:!0,disablePadding:!1,label:"Count"}];function ue(n){const{order:o,orderBy:s,onRequestSort:r}=n,c=t=>l=>{r(l,t)};return e.jsx(M,{children:e.jsx(x,{children:De.map(t=>e.jsx(u,{align:t.numeric?"right":"left",padding:t.disablePadding?"4":"normal",sortDirection:s===t.id?o:!1,children:e.jsxs(V,{active:s===t.id,direction:s===t.id?o:"asc",onClick:c(t.id),children:[t.label,s===t.id?e.jsx(_,{component:"span",sx:X,children:o==="desc"?"sorted descending":"sorted ascending"}):null]})},t.id))})})}ue.propTypes={onRequestSort:f.func.isRequired,order:f.oneOf(["asc","desc"]).isRequired,orderBy:f.string.isRequired};function me(n){const{numSelected:o}=n;return e.jsx(Z,{children:e.jsx(G,{sx:{flex:"1 1 100%",textAlign:"center"},variant:"h6",id:"tableTitle",component:"div",children:"PPE LIST"})})}me.propTypes={numSelected:f.number.isRequired};function ve(){const[n,o]=d.useState("asc"),[s,r]=d.useState("item_name"),[c,t]=d.useState([]),[l,P]=d.useState(0),[h,$]=d.useState(5),[R,T]=d.useState(!1),[C,w]=d.useState([]),[j,k]=d.useState([]),[N,O]=d.useState({});d.useEffect(()=>{(async()=>{try{const p=(await Q.get("/item/upcomingIssue/15/?filter=PPE")).data.data.PPE,z=Object.entries(p).map(([y,b],S)=>({id:S,item_name:y,count:b.count})),B=Object.entries(p).reduce((y,[b,S])=>{const U=S.issued_to.map(({employee_id:J,employee_name:F})=>({empCode:J,empName:F}));return{...y,[b]:U}},{});k(z),O(B)}catch(i){if(i.isAxiosError&&i.response){console.error(`HTTP error! status: ${i}`);const p=JSON.stringify(i.response.data);console.error("Response body:",p),alert(`Error: ${p}`)}console.error("Error fetching data:",i)}})()},[]);const q=(a,i)=>{o(s===i&&n==="asc"?"desc":"asc"),r(i)},I=(a,i)=>{const p=N[a];w(p),T(!0)},m=()=>{T(!1),w([])},g=(a,i)=>{P(i)},E=a=>{$(parseInt(a.target.value,10)),P(0)},D=l>0?Math.max(0,(1+l)*h-j.length):0,v=Y.useMemo(()=>Ee(j,we(n,s)).slice(l*h,l*h+h),[n,s,l,j,h]);return e.jsxs(_,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:[e.jsxs(W,{sx:{width:"100%",mb:2},children:[e.jsx(me,{numSelected:c.length}),e.jsx(A,{children:e.jsxs(H,{"aria-labelledby":"tableTitle",size:"medium",children:[e.jsx(ue,{order:n,orderBy:s,onRequestSort:q}),e.jsxs(L,{children:[v.map(a=>e.jsxs(x,{children:[e.jsx(u,{component:"th",scope:"row",padding:"4",children:a.item_name}),e.jsx(u,{align:"right",onClick:()=>I(a.item_name,a.count),style:{cursor:"pointer"},children:a.count})]})),D>0&&e.jsx(x,{style:{height:53*D},children:e.jsx(u,{colSpan:2})})]})]})}),e.jsx(K,{rowsPerPageOptions:[5,10,25],component:"div",count:j.length,rowsPerPage:h,page:l,onPageChange:g,onRowsPerPageChange:E})]}),e.jsxs(ee,{open:R,onClose:m,children:[e.jsx(se,{children:"Employee Details"}),e.jsx(te,{children:e.jsx(A,{children:e.jsxs(H,{children:[e.jsx(M,{children:e.jsxs(x,{children:[e.jsx(u,{children:"Employee Code"}),e.jsx(u,{children:"Employee Name"})]})}),e.jsx(L,{children:C&&C.map(a=>e.jsxs(x,{children:[e.jsx(u,{children:a.empCode}),e.jsx(u,{children:a.empName})]},a.empCode))})]})})}),e.jsx(ne,{children:e.jsx(re,{onClick:m,color:"primary",children:"Close"})})]})]})}function ie(n,o,s){return o[s]<n[s]?-1:o[s]>n[s]?1:0}function _e(n,o){return n==="desc"?(s,r)=>ie(s,r,o):(s,r)=>-ie(s,r,o)}function Oe(n,o){const s=n.map((r,c)=>[r,c]);return s.sort((r,c)=>{const t=o(r[0],c[0]);return t!==0?t:r[1]-c[1]}),s.map(r=>r[0])}const qe=[{id:"item_name",numeric:!1,disablePadding:!0,label:"Item Name"},{id:"count",numeric:!0,disablePadding:!1,label:"Count"}];function pe(n){const{order:o,orderBy:s,onRequestSort:r}=n,c=t=>l=>{r(l,t)};return e.jsx(M,{children:e.jsx(x,{children:qe.map(t=>e.jsx(u,{align:t.numeric?"right":"left",padding:t.disablePadding?"4":"normal",sortDirection:s===t.id?o:!1,children:e.jsxs(V,{active:s===t.id,direction:s===t.id?o:"asc",onClick:c(t.id),children:[t.label,s===t.id?e.jsx(_,{component:"span",sx:X,children:o==="desc"?"sorted descending":"sorted ascending"}):null]})},t.id))})})}pe.propTypes={onRequestSort:f.func.isRequired,order:f.oneOf(["asc","desc"]).isRequired,orderBy:f.string.isRequired};function he(n){const{numSelected:o}=n;return e.jsx(Z,{children:e.jsx(G,{sx:{flex:"1 1 100%",textAlign:"center"},variant:"h6",id:"tableTitle",component:"div",children:"DRESS LIST"})})}he.propTypes={numSelected:f.number.isRequired};function $e(){const[n,o]=d.useState("asc"),[s,r]=d.useState("item_name"),[c,t]=d.useState([]),[l,P]=d.useState(0),[h,$]=d.useState(5),[R,T]=d.useState(!1),[C,w]=d.useState([]),[j,k]=d.useState([]),[N,O]=d.useState({});d.useEffect(()=>{(async()=>{try{const p=(await Q.get("/item/upcomingIssue/360/?filter=Dress")).data.data.Dress,z=Object.entries(p).map(([y,b],S)=>({id:S,item_name:y,count:b.count})),B=Object.entries(p).reduce((y,[b,S])=>{const U=S.issued_to.map(({employee_id:J,employee_name:F})=>({empCode:J,empName:F}));return{...y,[b]:U}},{});k(z),O(B)}catch(i){if(i.isAxiosError&&i.response){console.error(`HTTP error! status: ${i}`);const p=JSON.stringify(i.response.data);console.error("Response body:",p),alert(`Error: ${p}`)}console.error("Error fetching data:",i)}})()},[]);const q=(a,i)=>{o(s===i&&n==="asc"?"desc":"asc"),r(i)},I=(a,i)=>{const p=N[a];w(p),T(!0)},m=()=>{T(!1),w([])},g=(a,i)=>{P(i)},E=a=>{$(parseInt(a.target.value,10)),P(0)},D=l>0?Math.max(0,(1+l)*h-j.length):0,v=Y.useMemo(()=>Oe(j,_e(n,s)).slice(l*h,l*h+h),[n,s,l,j,h]);return e.jsxs(_,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:[e.jsxs(W,{sx:{width:"100%",mb:2},children:[e.jsx(he,{numSelected:c.length}),e.jsx(A,{children:e.jsxs(H,{"aria-labelledby":"tableTitle",size:"medium",children:[e.jsx(pe,{order:n,orderBy:s,onRequestSort:q}),e.jsxs(L,{children:[v.map((a,i)=>e.jsxs(x,{children:[e.jsx(u,{component:"th",scope:"row",padding:"4",children:a.item_name}),e.jsx(u,{align:"right",onClick:()=>I(a.item_name,a.count),style:{cursor:"pointer"},children:a.count})]})),D>0&&e.jsx(x,{style:{height:53*D},children:e.jsx(u,{colSpan:2})})]})]})}),e.jsx(K,{rowsPerPageOptions:[5,10,25],component:"div",count:j.length,rowsPerPage:h,page:l,onPageChange:g,onRowsPerPageChange:E})]}),e.jsxs(ee,{open:R,onClose:m,children:[e.jsx(se,{children:"Employee Details"}),e.jsx(te,{children:e.jsx(A,{children:e.jsxs(H,{children:[e.jsx(M,{children:e.jsxs(x,{children:[e.jsx(u,{children:"Employee Code"}),e.jsx(u,{children:"Employee Name"})]})}),e.jsx(L,{children:C&&C.map(a=>e.jsxs(x,{children:[e.jsx(u,{children:a.empCode}),e.jsx(u,{children:a.empName})]},a.empCode))})]})})}),e.jsx(ne,{children:e.jsx(re,{onClick:m,color:"primary",children:"Close"})})]})]})}const ke=[{id:"slno",numeric:!1,disablePadding:!0,label:"SL NO"},{id:"employee_id",numeric:!0,disablePadding:!1,label:"Employee Code"},{id:"employee_name",numeric:!0,disablePadding:!1,label:"Employee Name"},{id:"checkup_date",numeric:!0,disablePadding:!1,label:"Checkup Date"}];function ge(n){const{order:o,orderBy:s,onRequestSort:r}=n,c=t=>l=>{r(l,t)};return e.jsx(M,{children:e.jsx(x,{children:ke.map(t=>e.jsx(u,{align:t.numeric?"right":"left",padding:t.disablePadding?"none":"normal",sortDirection:s===t.id?o:!1,children:e.jsxs(V,{active:s===t.id,direction:s===t.id?o:"asc",onClick:c(t.id),children:[t.label,s===t.id?e.jsx(_,{component:"span",sx:X,children:o==="desc"?"sorted descending":"sorted ascending"}):null]})},t.id))})})}ge.propTypes={onRequestSort:f.func.isRequired,order:f.oneOf(["asc","desc"]).isRequired,orderBy:f.string.isRequired};function ce(n,o,s){return o[s]<n[s]?-1:o[s]>n[s]?1:0}function Ne(n,o){return n==="desc"?(s,r)=>ce(s,r,o):(s,r)=>-ce(s,r,o)}function Ie(n,o){const s=n.map((r,c)=>[r,c]);return s.sort((r,c)=>{const t=o(r[0],c[0]);return t!==0?t:r[1]-c[1]}),s.map(r=>r[0])}function Ae(){const[n,o]=d.useState("asc"),[s,r]=d.useState("employee_id"),[c,t]=d.useState(0),[l,P]=d.useState(5),[h,$]=d.useState([]),[R,T]=d.useState("");d.useEffect(()=>{(async()=>{try{const D=(await Q.get("/medical/upcoming/15/")).data.data.map((v,a)=>({id:a+1,slno:a+1,employee_id:v.employee_id,employee_name:v.employee_name,checkup_date:v.checkup_date?Se(new Date(v.checkup_date),"dd/MM/yyyy"):"N/A"}));$(D)}catch(g){if(g.isAxiosError&&g.response){console.error(`HTTP error! status: ${g}`);const E=JSON.stringify(g.response.data);console.error("Response body:",E),alert(`Error: ${E}`)}console.error("Error fetching data:",g)}})()},[]);const C=(m,g)=>{o(s===g&&n==="asc"?"desc":"asc"),r(g)},w=(m,g)=>{t(g)},j=m=>{P(parseInt(m.target.value,10)),t(0)},k=()=>{const m=new ye;m.autoTable({head:[["SL NO","Employee Code","Employee Name","Checkup Date"]],body:h.map(g=>[g.slno,g.employee_id,g.employee_name,g.checkup_date])}),m.save("Upcoming 15 days medical-checkup-reports.pdf")},N=m=>{T(m.target.value)},O=h.filter(m=>m.employee_id.toLowerCase().includes(R.toLowerCase())||m.employee_name.toLowerCase().includes(R.toLowerCase())||m.checkup_date.toLowerCase().includes(R.toLowerCase())),q=c>0?Math.max(0,(1+c)*l-O.length):0,I=Ie(O,Ne(n,s)).slice(c*l,c*l+l);return e.jsx(_,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:e.jsxs(W,{sx:{width:"100%",mb:2,padding:5},children:[e.jsxs(_,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsx(G,{variant:"h6",id:"tableTitle",component:"div",children:"Medical Checkup Report"}),e.jsxs(_,{children:[e.jsx(be,{variant:"outlined",size:"small",placeholder:"Search...",value:R,onChange:N,sx:{marginRight:2}}),e.jsx(je,{title:"Download PDF",children:e.jsx(xe,{onClick:k,children:e.jsx(fe,{})})})]})]}),e.jsx(A,{children:e.jsxs(H,{sx:{minWidth:730},"aria-labelledby":"tableTitle",children:[e.jsx(ge,{order:n,orderBy:s,onRequestSort:C}),e.jsxs(L,{children:[I.map(m=>e.jsxs(x,{hover:!0,sx:{cursor:"pointer"},children:[e.jsx(u,{component:"th",scope:"row",padding:"none",children:m.slno}),e.jsx(u,{align:"right",children:m.employee_id}),e.jsx(u,{align:"right",children:m.employee_name}),e.jsx(u,{align:"right",children:m.checkup_date})]},m.id)),q>0&&e.jsx(x,{style:{height:53*q},children:e.jsx(u,{colSpan:5})})]})]})}),e.jsx(K,{rowsPerPageOptions:[5,10,25],component:"div",count:O.length,rowsPerPage:l,page:c,onPageChange:w,onRowsPerPageChange:j})]})})}function Ze(){return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{}),e.jsx(ve,{}),e.jsx($e,{}),e.jsx(Ae,{})]})}export{Ze as default};
